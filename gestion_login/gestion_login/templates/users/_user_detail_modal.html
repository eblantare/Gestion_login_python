<div class="modal fade" id="detailModal-{{ user.id }}" tabindex="-1" aria-labelledby="detailModalLabel-{{ user.id }}" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header bg-info text-white">
        <h5 class="modal-title" id="detailModalLabel-{{ user.id }}">DÃ©tail utilisateur</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Fermer"></button>
      </div>
      <div class="modal-body">
        {% if user.photo_filename %}
           <img src="{{ url_for('auth.static', filename='upload/' ~ user.photo_filename) }}" alt="{{ user.nom }}" 
           class="img-fluid rounded mb-3 profile-photo">
        {% endif %}
        <p><strong>ID :</strong> {{ user.id }}</p> 
        <p><strong>Nom :</strong> {{ user.nom }}</p>
        <p><strong>PrÃ©noms :</strong> {{ user.prenoms }}</p>
        <p><strong>Sexe :</strong>{{ user.sexe }}</p>
        <p><strong>Email :</strong> {{ user.email }}</p>
        <p><strong>TÃ©lÃ©phone :</strong> {{ user.telephone }}</p>
        <p><strong>Nom d'utilisateur :</strong> {{ user.username }}</p>
        <p><strong>RÃ´le :</strong> {{ user.role }}</p>
      </div>
      <div class="alert {% if user.locked_until and user.locked_until > utcnow() %}alert-danger{% else %}alert-success{% endif %}">
         {% if user.is_locked %}
             ğŸ”’ Compte bloquÃ© jusquâ€™Ã  {{ user.locked_until.strftime('%d/%m/%Y %H:%M') }}
             {% if current_user.is_authenticated and (current_user.role | lower in ['admin', 'administrateur']) %}
                 <form method="post" action="{{ url_for('auth.user_unlock', id = user.id) }}" class="mt-2">
                    <button type="submit" class="btn btn-sm btn-outline-light">DÃ©bloquer maintenant</button>
                 </form>
             {% endif %}
             {% else %}
                      âœ… Compte actif
          {% endif %}
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary rounded-pill" data-bs-dismiss="modal">Fermer</button>
      </div>
    </div>
  </div>
</div>